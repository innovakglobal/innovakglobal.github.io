(self.webpackChunkMyInnovak=self.webpackChunkMyInnovak||[]).push([[2790],{2790:(e,t,s)=>{"use strict";s.r(t),s.d(t,{AdminFirstFilterPageModule:()=>E,HttpLoaderFactory:()=>S});var i=s(1116),n=s(1041),o=s(4812),a=s(4258),r=s(4762),l=s(5366),c=s(649),u=s(6171),p=s(7047),d=s(8760),m=s(8154);function A(e,t){if(1&e&&(l.TgZ(0,"div"),l._uU(1),l.ALo(2,"CustomNumberPipe"),l.TgZ(3,"small"),l._uU(4),l.qZA(),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.hij(" ",l.lcZ(2,2,e.expenseTotal),""),l.xp6(3),l.hij("",e.currencyISO," ")}}function g(e,t){if(1&e&&(l.TgZ(0,"div"),l._uU(1),l.ALo(2,"CustomNumberPipe"),l.TgZ(3,"small"),l._uU(4,"USD"),l.qZA(),l.qZA()),2&e){const e=l.oxw().$implicit;l.xp6(1),l.hij(" ",l.lcZ(2,1,e.expenseTotalOnUSD),"")}}function h(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"ion-card"),l.TgZ(1,"ion-card-header",7),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw().openExpense(t)}),l.TgZ(2,"ion-card-subtitle"),l._uU(3),l.qZA(),l.TgZ(4,"ion-card-subtitle"),l._uU(5),l.TgZ(6,"ion-note",8),l._uU(7),l.ALo(8,"date"),l.ALo(9,"CustomDatePipe"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"ion-item",9),l.TgZ(11,"p"),l._uU(12),l.qZA(),l.qZA(),l.TgZ(13,"ion-card-content",7),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw().openExpense(t)}),l.TgZ(14,"p"),l.TgZ(15,"b"),l._uU(16),l.qZA(),l._uU(17),l.ALo(18,"CustomNumberPipe"),l.TgZ(19,"small"),l._uU(20,"USD "),l.qZA(),l.qZA(),l.TgZ(21,"ion-row",10),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw().openExpense(t)}),l.TgZ(22,"ion-col",11),l.TgZ(23,"ion-button",12),l._UZ(24,"ion-icon",13),l.YNc(25,A,5,4,"div",14),l.YNc(26,g,5,3,"div",14),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(27,"ion-item"),l.TgZ(28,"ion-label",15),l._uU(29),l.ALo(30,"translate"),l.qZA(),l.TgZ(31,"ion-textarea",16),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().expenseAdminCommentsPublics=t}),l.qZA(),l.qZA(),l.TgZ(32,"ion-row"),l.TgZ(33,"ion-col",17),l.TgZ(34,"ion-button",18),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw().updateExpenseStatus(t.expenseID,4)}),l._uU(35),l.ALo(36,"translate"),l.qZA(),l.qZA(),l.TgZ(37,"ion-col",17),l.TgZ(38,"ion-button",19),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw().updateExpenseStatus(t.expenseID,2)}),l._uU(39),l.ALo(40,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit,s=l.oxw();l.xp6(3),l.Oqu(e.expenseSupplier),l.xp6(2),l.hij("T",e.expenseID," "),l.xp6(2),l.Oqu(l.lcZ(8,14,l.lcZ(9,16,e.expenseDate))),l.xp6(5),l.hij(" ",e.userName," "),l.xp6(4),l.hij("",e.categoryName,":"),l.xp6(1),l.AsE(" ",e.expenseDescription," ",l.lcZ(18,18,e.expenseTotalOnUSD)," "),l.xp6(6),l.s9C("color",e.expenseStatusName),l.xp6(2),l.Q6J("ngIf",1==s.userData.userAppCountryID||4==s.userData.userAppCountryID||5==s.userData.userAppCountryID),l.xp6(1),l.Q6J("ngIf",2==s.userData.userAppCountryID||3==s.userData.userAppCountryID),l.xp6(3),l.hij("",l.lcZ(30,20,"PAGES.ADMGASTOS.NOTASGASTO"),"*"),l.xp6(2),l.Q6J("ngModel",s.expenseAdminCommentsPublics),l.xp6(4),l.hij("",l.lcZ(36,22,"PAGES.ADMGASTOS.RECHAZAR")," "),l.xp6(4),l.hij("",l.lcZ(40,24,"PAGES.ADMGASTOS.ACEPTAR")," ")}}function Z(e,t){1&e&&(l.TgZ(0,"div",20),l._UZ(1,"ion-icon",21),l.TgZ(2,"h2",22),l._uU(3),l.ALo(4,"translate"),l.qZA(),l.TgZ(5,"p"),l._uU(6),l.ALo(7,"translate"),l.qZA(),l.qZA()),2&e&&(l.xp6(3),l.Oqu(l.lcZ(4,2,"PAGES.ADMGASTOS.NODATA")),l.xp6(3),l.hij(" ",l.lcZ(7,4,"PAGES.ADMGASTOS.NODATAADMIN"),""))}const x=[{path:"",component:(()=>{class e{constructor(e,t,s,i,n,o){this.translate=e,this.expensesService=t,this.alertCtrl=s,this.loadingCtrl=i,this.router=n,this.toastService=o,this.idioma="es",this.adminFirstFilterExpensesData=[],this.gastosFiltrados=[],this.empleadosBD=[],this.expenseAdminCommentsPublics="",this.empleadoID="0",e.setDefaultLang(this.idioma),this.translate.use(this.idioma)}ionViewWillEnter(){localStorage.getItem("userData")?(this.userData=JSON.parse(localStorage.getItem("userData")),this.translate.use(localStorage.getItem("idioma")),this.GET_usersByBoss(),this.GET_adminFirstFilterExpenses()):this.router.navigate(["/login"])}backButton(){this.router.navigate(["/tabs/gastos"])}openExpense(e){this.router.navigate("4"==e.userAppCountryID?["/tabs/admin-second-filter-expense-col"]:["/tabs/admin-second-filter-expense"],{state:{expenseID:e.expenseID}})}GET_usersByBoss(){return(0,r.mG)(this,void 0,void 0,function*(){var e=yield this.loadingCtrl.create({message:"Cargando..."});e.present(),this.expensesService.GET_usersByBoss(this.userData.userID).subscribe(e=>{this.empleadosBD=e}),e.dismiss()})}GET_adminFirstFilterExpenses(){return(0,r.mG)(this,void 0,void 0,function*(){var e=yield this.loadingCtrl.create({message:"Cargando..."});e.present(),this.expensesService.GET_adminFirstFilterExpenses(this.userData.userID).subscribe(e=>(0,r.mG)(this,void 0,void 0,function*(){console.log(e),"200"==e[0].statusID?(this.adminFirstFilterExpensesData=e,this.gastosFiltrados=this.adminFirstFilterExpensesData):this.toastService.showToastBottom(e[0].statusDescription)})),e.dismiss()})}buscarEmpleado(){return(0,r.mG)(this,void 0,void 0,function*(){const e=[];e.push("0"==this.empleadoID?{type:"radio",label:"Todos",value:"0",checked:!0}:{type:"radio",label:"Todos",value:"0",checked:!1});for(let t of this.empleadosBD)e.push(t.empleadoID==this.empleadoID?{type:"radio",label:t.nombreEmpleado,value:t.empleadoID,checked:!0}:{type:"radio",label:t.nombreEmpleado,value:t.empleadoID,checked:!1});(yield this.alertCtrl.create({header:this.translate.instant("PAGES.NUEVOGASTO.REGION"),inputs:e,buttons:[{text:this.translate.instant("PAGES.NUEVOGASTO.CANCELAR"),role:"cancel"},{text:"Ok",handler:e=>{this.empleadoID=e,this.gastosFiltrados="0"===this.empleadoID?this.adminFirstFilterExpensesData:this.adminFirstFilterExpensesData.filter(e=>e.userID==this.empleadoID)}}]})).present()})}updateExpenseStatus(e,t){let s=0,i="";2==t?(s=2,i="Aceptado by "+this.userData.userEmail.replace("@innovakglobal.com","")+": "+this.expenseAdminCommentsPublics):(s=1,i="Rechazado by "+this.userData.userEmail.replace("@innovakglobal.com","")+": "+this.expenseAdminCommentsPublics),this.expensesService.POST_updateExpenseAdminFirstFilter(e,t,s,i).subscribe(e=>(0,r.mG)(this,void 0,void 0,function*(){"200"==e[0].statusID?(this.toastService.showToastBottom(e[0].statusDescription),1==this.adminFirstFilterExpensesData.length?(yield this.alertCtrl.create({header:"\xa1Excelente!",subHeader:"Haz finalizado de administrar todos los gastos pendientes",buttons:[{text:"Ok",handler:()=>{this.router.navigate(["./tabs/"])}}]})).present():(this.expenseAdminCommentsPublics="",this.adminFirstFilterExpensesData=[],this.GET_adminFirstFilterExpenses())):this.toastService.showToastBottom(e[0].statusDescription)}))}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(c.sK),l.Y36(u.r),l.Y36(o.Br),l.Y36(o.HT),l.Y36(a.F0),l.Y36(p.k))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-admin-first-filter"]],decls:13,vars:5,consts:[["color","primary","mode","ios"],["icon","arrow-back","text","","defaultHref","../gastos",3,"click"],[4,"ngFor","ngForOf"],["class","message","padding","",4,"ngIf"],["vertical","top","horizontal","end","no-padding","","slot","fixed"],["color","primary","size","small",3,"click"],["name","search"],[3,"click"],[2,"float","right"],["text-center","",1,"user-name"],["no-padding","",3,"click"],["text-center",""],["fill","clear","size","small",3,"color"],["slot","start","name","logo-usd","color","danger"],[4,"ngIf"],["position","stacked",1,"user-name"],["rows","2","maxLength","100","name","expenseAdminCommentsPublics","required","",3,"ngModel","ngModelChange"],["col-6",""],["type","button","color","danger","expand","block",3,"click"],["type","button","color","success","expand","block",3,"click"],["padding","",1,"message"],["name","sad"],[1,"slide-title"]],template:function(e,t){1&e&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons"),l.TgZ(3,"ion-back-button",1),l.NdJ("click",function(){return t.backButton()}),l.qZA(),l.qZA(),l.TgZ(4,"ion-title"),l._uU(5),l.ALo(6,"translate"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"ion-content"),l.YNc(8,h,41,26,"ion-card",2),l.YNc(9,Z,8,6,"div",3),l.TgZ(10,"ion-fab",4),l.TgZ(11,"ion-fab-button",5),l.NdJ("click",function(){return t.buscarEmpleado()}),l._UZ(12,"ion-icon",6),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(5),l.Oqu(l.lcZ(6,3,"PAGES.ADMGASTOS.ADMGASTOS")),l.xp6(3),l.Q6J("ngForOf",t.gastosFiltrados),l.xp6(1),l.Q6J("ngIf",0==t.gastosFiltrados.length))},directives:[o.Gu,o.sr,o.Sm,o.oU,o.cs,o.wd,o.W2,i.sg,i.O5,o.IJ,o.W4,o.gu,o.PM,o.Zi,o.tO,o.uN,o.Ie,o.FN,o.Nd,o.wI,o.YG,o.Q$,o.g2,o.j9,n.Q7,n.JJ,n.On],pipes:[c.X$,i.uU,d.F,m.v],styles:[".user-name[_ngcontent-%COMP%]{color:#c5c5c5}ion-button[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:20px;color:#dc3545}"]}),e})()}];let D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[a.Bz.forChild(x)],a.Bz]}),e})();var T=s(9037),b=s(2693),f=s(5774);function S(e){return new T.w(e,"assets/i18n/",".json")}let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[i.ez,n.u5,o.Pc,D,f.D,c.aw.forRoot({loader:{provide:c.Zw,useFactory:S,deps:[b.eN]}})]]}),e})()}}]);