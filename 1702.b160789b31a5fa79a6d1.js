(self.webpackChunkMyInnovak=self.webpackChunkMyInnovak||[]).push([[1702],{1702:(e,t,i)=>{"use strict";i.r(t),i.d(t,{HttpLoaderFactory:()=>F,RequestPageModule:()=>_});var n=i(1116),o=i(1041),a=i(4812),r=i(4258),s=i(4762),l=i(6948),u=i(5049),c=i(5691),d=i(5366),p=i(3762),m=i(4033),g=i(7047),h=i(649),Z=i(6532),f=i(6116);let A=(()=>{class e{transform(e,t){return e.slice(0,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=d.Yjl({name:"limitNGFORPipe",type:e,pure:!0}),e})();function y(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"ion-item",46),d.NdJ("click",function(){const t=d.CHM(e).$implicit;return d.oxw().openFile(t)}),d._UZ(1,"ion-icon",33),d._uU(2),d.qZA()}if(2&e){const e=t.$implicit;d.xp6(2),d.hij(" ",e," ")}}function q(e,t){if(1&e&&(d.TgZ(0,"ion-select-option",47),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e),d.xp6(1),d.Oqu(e)}}function v(e,t){if(1&e&&d._UZ(0,"img",48),2&e){const e=d.oxw();d.Q6J("src",e.photo64PreviewData,d.LSH)}}function T(e,t){if(1&e&&(d.TgZ(0,"ion-button",49),d._uU(1),d.ALo(2,"translate"),d.qZA()),2&e){d.oxw();const e=d.MAs(8);d.Q6J("disabled",!e.valid),d.xp6(1),d.hij("",d.lcZ(2,2,"PAGES.NUEVOGASTO.ENVIAR")," ")}}function b(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"ion-fab-button",50),d.NdJ("click",function(){return d.CHM(e),d.oxw().takePhoto()}),d._UZ(1,"ion-icon",51),d.qZA()}}const M=[{path:"",component:(()=>{class e{constructor(e,t,i,n,o,a,r,s,d,p,m,g){this.datePipe=e,this.laboratoryService=t,this.navParams=i,this.cameraService=n,this.toastService=o,this.alertCtrl=a,this.loadingCtrl=r,this.translate=s,this.datePicker=d,this.iab=p,this.router=m,this.plt=g,this.userData="",this.newFile="",this.newFileName="",this.photo64Preview="",this.photo64PreviewData="",this.fileSource="no file",this.idioma="es",this.typeOfIrrigation=[],this.typeOfSample=[],this.typeOfAnalysis=[],this.sampleDate="05-12-2018",this.sistemaOperativo="",this.requestAdminFile=[],this.analisisArray=l.i,this.irrigationsArray=u.U,this.samplesArray=c.u,this.numMuestras=[],this.validateDate=/^(0?[1-9]|[12][0-9]|3[01])[\-](0[1-9]|1[012])[\-]\d{4}$/,s.setDefaultLang(this.idioma),this.translate.use(this.idioma);const h=this.router.getCurrentNavigation();try{this.idSolicitud=h.extras.state.requestID}catch(Z){this.router.navigate(["/tabs/laboratorio"])}for(let l=1;l<=50;l++)this.numMuestras.push(l)}ionViewDidEnter(){return(0,s.mG)(this,void 0,void 0,function*(){if(localStorage.getItem("userData")){this.userData=JSON.parse(localStorage.getItem("userData")),this.sistemaOperativo=this.plt.is("android")?"android":"ios",this.sampleDate=(new Date).toISOString();var e=yield this.loadingCtrl.create({message:"Cargando..."});e.present(),this.laboratoryService.GET_labRequestByID(this.idSolicitud).subscribe(t=>{"200"==t[0].statusID?(this.requestID=t[0].requestID,this.agricultura=t[0].agricultura,this.agriculturaOwner=t[0].agriculturaOwner,this.sampleNumber=t[0].sampleNumber,this.lot=t[0].lot,this.sampleDate=this.transformDate(t[0].sampleDate),this.culture=t[0].culture,this.typeOfSample=t[0].typeOfSample,this.typeOfAnalysis=t[0].typeOfAnalysis,this.symptom=t[0].symptom,this.usedProducts=t[0].usedProducts,this.stage=t[0].stage,this.typeOfIrrigation=t[0].typeOfIrrigation,this.information=t[0].information,this.requestStatusID=t[0].requestStatusID,this.requestStatusName=t[0].requestStatusName,this.requestFile=t[0].requestFile,this.requestFile2=t[0].requestFile,this.adminComments=t[0].adminComments,this.requestAdminFile=t[0].requestAdminFile.split(",")):this.toastService.showToastBottom(t[0].statusDescription),e.dismiss()})}else this.router.navigate(["/login"])})}backButton(){this.router.navigate(["/tabs/laboratorio"])}transformDate(e){return e.length>10&&(e=e.substr(0,10)),new Array,e.split("/"),this.datePipe.transform(e,"dd-MM-yyyy")}validateDateFunction(e){return!(!this.validateDate.test(e)||""==e)}openFile(e){this.iab.create("http://201.174.71.70/MyInnovak_Laboratory/endPoints/adminFiles/"+e,"_system")}sendForm(e){return(0,s.mG)(this,void 0,void 0,function*(){if("true"==localStorage.getItem("appNetworkStatus"))if(this.validateDateFunction(e.value.sampleDate))if("no file"!=this.fileSource){var t=yield this.loadingCtrl.create({message:"Enviando solicitud..."});t.present(),this.laboratoryService.POST_updateLabRequest(e.value,document.getElementById("file-2").files[0],this.photo64Preview).subscribe(e=>(0,s.mG)(this,void 0,void 0,function*(){if("200"==e[0].statusID){t.dismiss();let e=yield this.alertCtrl.create({header:"Solicitud registrada",subHeader:"Solicitud enviada con exito",buttons:[{text:"Ok",handler:()=>{this.router.navigate(["/tabs/laboratorio"])}}]});yield e.present()}else t.dismiss(),this.toastService.showToastBottom(e[0].statusDescription)}))}else this.toastService.showToastBottom("Es necesario adjuntar una imagen");else this.toastService.showToastBottom("Formato de fecha invalido (dd-MM-yyyy)");else this.toastService.showToastBottom("Es necesario conectarse a internet")})}takePhoto(){this.newFile="",this.newFileName="",this.photo64Preview="",this.photo64PreviewData="",this.fileSource="no file",this.cameraService.takePhotoService().then(e=>{this.photo64Preview=e,this.photo64PreviewData="data:image/jpeg;base64,"+e,this.fileSource="Camera"})}getFileName(){this.newFileName="",this.newFileName=document.getElementById("file-2").files[0].name,this.fileSource=this.newFileName.length<4?"no file":"internalStorage"}pickFileFromDevice(){this.newFile="",this.newFileName="",this.photo64Preview="",this.photo64PreviewData="",this.fileSource="no file",document.getElementById("file-2").click(),this.newFile=document.getElementById("file-2").files[0]}typeOfSamplesModal(){return(0,s.mG)(this,void 0,void 0,function*(){const e=[];let t=this.typeOfSample;for(let i of this.samplesArray)t.includes(i.value)?e.push({type:"radio",label:i.label,value:i.value,checked:!0}):e.push({type:"radio",label:i.label,value:i.value,checked:!1});(yield this.alertCtrl.create({header:"Tipo de muestra",inputs:e,buttons:[{text:this.translate.instant("PAGES.NUEVOGASTO.CANCELAR"),role:"cancel"},{text:"Ok",handler:e=>{this.typeOfSample=e}}]})).present()})}typeOfirrigationsModal(){return(0,s.mG)(this,void 0,void 0,function*(){const e=[];let t=this.typeOfIrrigation;for(let i of this.irrigationsArray)t.includes(i.value)?e.push({type:"radio",label:i.label,value:i.value,checked:!0}):e.push({type:"radio",label:i.label,value:i.value,checked:!1});(yield this.alertCtrl.create({header:"Tipo de riego",inputs:e,buttons:[{text:this.translate.instant("PAGES.NUEVOGASTO.CANCELAR"),role:"cancel"},{text:"Ok",handler:e=>{this.typeOfIrrigation=e}}]})).present()})}typeOfAnalysisModal(){return(0,s.mG)(this,void 0,void 0,function*(){const e=[];let t=this.typeOfAnalysis;for(let i of this.analisisArray)t.includes(i.value)?e.push({type:"radio",label:i.label,value:i.value,checked:!0}):e.push({type:"radio",label:i.label,value:i.value,checked:!1});(yield this.alertCtrl.create({header:"Tipo de analisis",inputs:e,buttons:[{text:this.translate.instant("PAGES.NUEVOGASTO.CANCELAR"),role:"cancel"},{text:"Ok",handler:e=>{this.typeOfAnalysis=e}}]})).present()})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(n.uU),d.Y36(p.v),d.Y36(a.X1),d.Y36(m.y),d.Y36(g.k),d.Y36(a.Br),d.Y36(a.HT),d.Y36(h.sK),d.Y36(Z.M),d.Y36(f.i),d.Y36(r.F0),d.Y36(a.t4))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-request"]],features:[d._Bn([a.X1])],decls:110,vars:33,consts:[["color","primary","mode","ios"],["icon","arrow-back","text","","defaultHref","../laboratorio",3,"click"],["padding",""],[3,"ngSubmit"],["forma","ngForm"],["size","12"],["color","light"],["slot","end","name","person-circle","color","primary","size","large"],[1,"p-title"],["type","text","name","adminComments","rows","3","disabled","",3,"ngModel","ngModelChange"],["class","file-list",3,"click",4,"ngFor","ngForOf"],["color","light",1,"report-divider"],["name","newspaper","slot","end","color","primary"],[1,"hidden"],["position","stacked"],["type","text","name","requestID","required","",3,"ngModel","ngModelChange"],["type","text","name","agricultura","required","",3,"ngModel"],["type","text","name","agriculturaOwner","required","",3,"ngModel"],["value","1","name","sampleNumber","cancelText","CANCELAR","okText","OK","required","",3,"ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","text","name","lot","required","",3,"ngModel"],["displayFormat","DD/MM/YYYY","name","sampleDate","required","",3,"ngModel","ngModelChange"],["type","text","name","culture","required","",3,"ngModel"],["type","text","name","typeOfSample","readonly","true","required","",3,"ngModel","click"],["type","text","name","typeOfAnalysis","readonly","true","required","",3,"ngModel","click"],["type","text","name","symptom",3,"ngModel"],["type","text","name","usedProducts",3,"ngModel"],["type","text","name","stage",3,"ngModel"],["type","text","name","typeOfIrrigation","readonly","true",3,"ngModel","click"],["rows","5","maxLength","100","name","information","required","",3,"ngModel"],["floating",""],["type","text","name","requestFile",3,"ngModel","ngModelChange"],[1,"file-list"],["name","attach","color","primary","item-start",""],[1,"display-none"],["type","text","name","fileSource","readonly","true","text-center","",3,"ngModel","ngModelChange"],[3,"src",4,"ngIf"],["type","file","name","file-2[]","id","file-2",3,"change"],["type","submit","expand","block","color","primary",3,"disabled",4,"ngIf"],["vertical","bottom","horizontal","end","no-padding","","slot","fixed"],["color","primary","size","small","color","primary"],["name","folder","size","small"],["side","top"],["color","primary","size","small",3,"click"],["name","newspaper"],["color","primary",3,"click",4,"ngIf"],[1,"file-list",3,"click"],[3,"value"],[3,"src"],["type","submit","expand","block","color","primary",3,"disabled"],["color","primary",3,"click"],["name","camera"]],template:function(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"ion-header"),d.TgZ(1,"ion-toolbar",0),d.TgZ(2,"ion-buttons"),d.TgZ(3,"ion-back-button",1),d.NdJ("click",function(){return t.backButton()}),d.qZA(),d.qZA(),d.TgZ(4,"ion-title"),d._uU(5),d.qZA(),d.qZA(),d.qZA(),d.TgZ(6,"ion-content",2),d.TgZ(7,"form",3,4),d.NdJ("ngSubmit",function(){d.CHM(e);const i=d.MAs(8);return t.sendForm(i)}),d.TgZ(9,"ion-row"),d.TgZ(10,"ion-col",5),d.TgZ(11,"ion-item-divider",6),d._uU(12),d.ALo(13,"translate"),d._UZ(14,"ion-icon",7),d.qZA(),d.TgZ(15,"p",8),d._uU(16),d.ALo(17,"translate"),d.qZA(),d.TgZ(18,"ion-col",5),d.TgZ(19,"ion-item"),d.TgZ(20,"ion-textarea",9),d.NdJ("ngModelChange",function(e){return t.adminComments=e}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"p",8),d._uU(22,"Archivos:"),d.qZA(),d.YNc(23,y,3,1,"ion-item",10),d.ALo(24,"limitNGFORPipe"),d.TgZ(25,"ion-item-divider",11),d._uU(26," Reporte "),d._UZ(27,"ion-icon",12),d.qZA(),d.TgZ(28,"ion-item",13),d.TgZ(29,"ion-label",14),d._uU(30,"Solicitud*"),d.qZA(),d.TgZ(31,"ion-input",15),d.NdJ("ngModelChange",function(e){return t.requestID=e}),d.qZA(),d.qZA(),d.TgZ(32,"ion-item"),d.TgZ(33,"ion-label",14),d._uU(34,"Agricola*"),d.qZA(),d._UZ(35,"ion-input",16),d.qZA(),d.TgZ(36,"ion-item"),d.TgZ(37,"ion-label",14),d._uU(38,"Propietario*"),d.qZA(),d._UZ(39,"ion-input",17),d.qZA(),d.TgZ(40,"ion-item"),d.TgZ(41,"ion-label",14),d._uU(42,"N\xfamero de muestras*"),d.qZA(),d.TgZ(43,"ion-select",18),d.YNc(44,q,2,2,"ion-select-option",19),d.qZA(),d.qZA(),d.TgZ(45,"ion-item"),d.TgZ(46,"ion-label",14),d._uU(47,"Lote, cuadro, parcela etc*"),d.qZA(),d._UZ(48,"ion-input",20),d.qZA(),d.TgZ(49,"ion-item"),d.TgZ(50,"ion-label",14),d._uU(51,"Fecha de muestra*"),d.qZA(),d.TgZ(52,"ion-datetime",21),d.NdJ("ngModelChange",function(e){return t.sampleDate=e}),d.qZA(),d.qZA(),d.TgZ(53,"ion-item"),d.TgZ(54,"ion-label",14),d._uU(55,"Cultivo*"),d.qZA(),d._UZ(56,"ion-input",22),d.qZA(),d.TgZ(57,"ion-item"),d.TgZ(58,"ion-label",14),d._uU(59,"Tipo de muestra*"),d.qZA(),d.TgZ(60,"ion-input",23),d.NdJ("click",function(){return t.typeOfSamplesModal()}),d.qZA(),d.qZA(),d.TgZ(61,"ion-item"),d.TgZ(62,"ion-label",14),d._uU(63,"Analisis solicitado*"),d.qZA(),d.TgZ(64,"ion-input",24),d.NdJ("click",function(){return t.typeOfAnalysisModal()}),d.qZA(),d.qZA(),d.TgZ(65,"ion-item"),d.TgZ(66,"ion-label",14),d._uU(67,"Sintomas de la planta"),d.qZA(),d._UZ(68,"ion-input",25),d.qZA(),d.TgZ(69,"ion-item"),d.TgZ(70,"ion-label",14),d._uU(71,"Productos innovak utilizados"),d.qZA(),d._UZ(72,"ion-input",26),d.qZA(),d.TgZ(73,"ion-item"),d.TgZ(74,"ion-label",14),d._uU(75,"Etapa fenol\xf3gica"),d.qZA(),d._UZ(76,"ion-input",27),d.qZA(),d.TgZ(77,"ion-item"),d.TgZ(78,"ion-label",14),d._uU(79,"Tipo de riego"),d.qZA(),d.TgZ(80,"ion-input",28),d.NdJ("click",function(){return t.typeOfirrigationsModal()}),d.qZA(),d.qZA(),d.TgZ(81,"ion-item"),d.TgZ(82,"ion-label",14),d._uU(83,"Informaci\xf3n adicional*"),d.qZA(),d._UZ(84,"ion-textarea",29),d.qZA(),d.TgZ(85,"ion-item",13),d.TgZ(86,"ion-label",30),d._uU(87,"Archivo Actual:*"),d.qZA(),d.TgZ(88,"ion-input",31),d.NdJ("ngModelChange",function(e){return t.requestFile=e}),d.qZA(),d.qZA(),d.TgZ(89,"p",8),d._uU(90,"Archivo de la solicitud:"),d.qZA(),d.TgZ(91,"ion-item",32),d._UZ(92,"ion-icon",33),d._uU(93),d.qZA(),d.TgZ(94,"ion-item",34),d.TgZ(95,"ion-label",14),d._uU(96,"fileSource"),d.qZA(),d.TgZ(97,"ion-input",35),d.NdJ("ngModelChange",function(e){return t.fileSource=e}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(98,"ion-item"),d.YNc(99,v,1,1,"img",36),d.qZA(),d.TgZ(100,"ion-item",34),d.TgZ(101,"input",37),d.NdJ("change",function(){return t.getFileName()}),d.qZA(),d.qZA(),d.YNc(102,T,3,4,"ion-button",38),d.qZA(),d.TgZ(103,"ion-fab",39),d.TgZ(104,"ion-fab-button",40),d._UZ(105,"ion-icon",41),d.qZA(),d.TgZ(106,"ion-fab-list",42),d.TgZ(107,"ion-fab-button",43),d.NdJ("click",function(){return t.pickFileFromDevice()}),d._UZ(108,"ion-icon",44),d.qZA(),d.YNc(109,b,2,0,"ion-fab-button",45),d.qZA(),d.qZA(),d.qZA()}2&e&&(d.xp6(5),d.hij("Solicitud #",t.requestID,""),d.xp6(7),d.hij(" ",d.lcZ(13,26,"PAGES.GASTO.ADMIN")," "),d.xp6(4),d.hij("",d.lcZ(17,28,"PAGES.GASTO.COMENTARIOS"),":"),d.xp6(4),d.Q6J("ngModel",t.adminComments),d.xp6(3),d.Q6J("ngForOf",d.xi3(24,30,t.requestAdminFile,t.requestAdminFile.length-1)),d.xp6(8),d.Q6J("ngModel",t.requestID),d.xp6(4),d.Q6J("ngModel",t.agricultura),d.xp6(4),d.Q6J("ngModel",t.agriculturaOwner),d.xp6(4),d.Q6J("ngModel",t.sampleNumber),d.xp6(1),d.Q6J("ngForOf",t.numMuestras),d.xp6(4),d.Q6J("ngModel",t.lot),d.xp6(4),d.Q6J("ngModel",t.sampleDate),d.xp6(4),d.Q6J("ngModel",t.culture),d.xp6(4),d.Q6J("ngModel",t.typeOfSample),d.xp6(4),d.Q6J("ngModel",t.typeOfAnalysis),d.xp6(4),d.Q6J("ngModel",t.symptom),d.xp6(4),d.Q6J("ngModel",t.usedProducts),d.xp6(4),d.Q6J("ngModel",t.stage),d.xp6(4),d.Q6J("ngModel",t.typeOfIrrigation),d.xp6(4),d.Q6J("ngModel",t.information),d.xp6(4),d.Q6J("ngModel",t.requestFile),d.xp6(5),d.hij(" ",t.requestFile2," "),d.xp6(4),d.Q6J("ngModel",t.fileSource),d.xp6(2),d.Q6J("ngIf",t.photo64PreviewData.length>115),d.xp6(3),d.Q6J("ngIf","4"===t.requestStatusID||"1"===t.requestStatusID),d.xp6(7),d.Q6J("ngIf","android"===t.sistemaOperativo))},directives:[a.Gu,a.sr,a.Sm,a.oU,a.cs,a.wd,a.W2,o._Y,o.JL,o.F,a.Nd,a.wI,a.rH,a.gu,a.Ie,a.g2,a.j9,o.JJ,o.On,n.sg,a.Q$,a.pK,o.Q7,a.t9,a.QI,a.x4,n.O5,a.IJ,a.W4,a.zq,a.n0,a.YG],pipes:[h.X$,A],styles:["ion-item[_ngcontent-%COMP%]{padding-left:0!important}.file-list[_ngcontent-%COMP%]{margin:0 0 0 10px}.file-list[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px!important}.report-divider[_ngcontent-%COMP%]{margin-top:25px}.p-title[_ngcontent-%COMP%]{color:#9f9f9f}"]}),e})()}];let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[r.Bz.forChild(M)],r.Bz]}),e})();var x=i(9037),O=i(2693),w=i(5774);function F(e){return new x.w(e,"assets/i18n/",".json")}let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[n.ez,o.u5,a.Pc,S,w.D,h.aw.forRoot({loader:{provide:h.Zw,useFactory:F,deps:[O.eN]}})]]}),e})()}}]);