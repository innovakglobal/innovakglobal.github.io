(self.webpackChunkMyInnovak=self.webpackChunkMyInnovak||[]).push([[908],{908:(t,e,i)=>{"use strict";i.r(e),i.d(e,{NewSelloutPageModule:()=>p});var s=i(1116),o=i(1041),r=i(4812),n=i(4258),a=i(4762),d=i(8975),l=i(5366),u=i(649),c=i(7047),h=i(4119);function m(t,e){if(1&t&&(l.TgZ(0,"ion-select-option",13),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.s9C("value",t.IdDistribuidor),l.xp6(1),l.Oqu(t.NombreDistribuidor)}}const b=[{path:"",component:(()=>{class t{constructor(t,e,i,s,o,r,n){this.router=t,this.translate=e,this.navParams=i,this.toastService=s,this.loadingCtrl=o,this.distribuidoresservice=r,this.alertCtrl=n,this.monthsArray=d.k,this.idioma="es",e.setDefaultLang(this.idioma),this.translate.use(this.idioma);const a=this.router.getCurrentNavigation();this.distribuidor=a.extras.state.IdDistribuidor,this.mes=a.extras.state.mes,this.pais=a.extras.state.pais;for(let d of this.monthsArray)d.id==this.mes&&(this.nombreMes=d.name)}ionViewDidEnter(){return(0,a.mG)(this,void 0,void 0,function*(){this.GET_Paises().then(t=>{this.GET_allDistribuitors()})})}backButton(){this.router.navigate(["/tabs/ventas-dist"])}mesModal(){return(0,a.mG)(this,void 0,void 0,function*(){const t=[];for(let e of this.monthsArray)t.push(e.id!=this.mes?{type:"radio",label:e.name,value:e.id,checked:!1}:{type:"radio",label:e.name,value:e.id,checked:!0});(yield this.alertCtrl.create({header:"Mes",inputs:t,buttons:[{text:this.translate.instant("PAGES.NUEVOGASTO.CANCELAR"),role:"cancel"},{text:"Ok",handler:t=>{this.mes=t;for(let e of this.monthsArray)e.id==this.mes&&(this.nombreMes=e.name)}}]})).present()})}GET_Paises(){return(0,a.mG)(this,void 0,void 0,function*(){return new Promise((t,e)=>(0,a.mG)(this,void 0,void 0,function*(){var i=yield this.loadingCtrl.create({message:"Cargando..."});if(i.present(),"true"!=localStorage.getItem("appNetworkStatus"))return this.toastService.showToastBottom("Es necesario conectarse a internet"),void i.dismiss();this.paises=[];let s=JSON.parse(localStorage.getItem("userData")).userEmail.split("@");this.distribuidoresservice.GET_UserCountries(s[0]).subscribe(e=>(0,a.mG)(this,void 0,void 0,function*(){this.paises=e;for(let t of this.paises)t.IdPais+" - "+t.Compania==this.pais&&(this.nombrePais=t.NombrePais+" - "+t.Compania);return i.dismiss(),t(e)}),t=>(this.paises=[],this.toastService.showToastBottom("No se encontr\xf3 informaci\xf3n"),console.log("Error: "+t),i.dismiss(),e(t)))}))})}GET_allDistribuitors(){return(0,a.mG)(this,void 0,void 0,function*(){var t=yield this.loadingCtrl.create({message:"Cargando..."});if(t.present(),"true"!=localStorage.getItem("appNetworkStatus"))return this.toastService.showToastBottom("Es necesario conectarse a internet"),void t.dismiss();this.distribuidores=[],this.distribuidoresservice.GET_allDistribuitors(this.pais,"%").subscribe(t=>{this.distribuidores=t;for(let e of this.distribuidores)e.IdDistribuidor==this.distribuidor&&(this.nombreDistribuidor=e.NombreDistribuidor)},t=>{this.distribuidores=[],this.toastService.showToastBottom("No se encontr\xf3 informaci\xf3n")}),t.dismiss()})}sendForm(t){return(0,a.mG)(this,void 0,void 0,function*(){var e=yield this.loadingCtrl.create({message:"Guardando Sell-out..."});e.present(),this.distribuidoresservice.POST_newSellout(t.value).subscribe(t=>(0,a.mG)(this,void 0,void 0,function*(){200==t.status?(e.dismiss(),(yield this.alertCtrl.create({header:this.translate.instant("Guardado"),subHeader:this.translate.instant("Se ha guardado el Sell-out del distribuidor"),buttons:[{text:"Ok",handler:()=>{this.router.navigate(["/tabs/ventas-dist"])}}]})).present()):(e.dismiss(),this.toastService.showToastBottom(t[0].statusDescription))}))})}userPaisModal(){return(0,a.mG)(this,void 0,void 0,function*(){const t=[];for(let e of this.paises)t.push(0==e.IdPais?{type:"radio",label:e.NombrePais+" - "+e.Compania,value:e.IdPais+" - "+e.Compania,checked:!0}:{type:"radio",label:e.NombrePais+" - "+e.Compania,value:e.IdPais+" - "+e.Compania,checked:!1});(yield this.alertCtrl.create({header:"Pa\xeds",inputs:t,buttons:[{text:this.translate.instant("PAGES.NUEVOGASTO.CANCELAR"),role:"cancel"},{text:"Ok",handler:t=>{this.pais=t;for(let e of this.paises)e.IdPais+" - "+e.Compania==this.pais&&(this.nombrePais=e.NombrePais+" - "+e.Compania,this.GET_allDistribuitors())}}]})).present()})}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(n.F0),l.Y36(u.sK),l.Y36(r.X1),l.Y36(c.k),l.Y36(r.HT),l.Y36(h.L),l.Y36(r.Br))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-new-sellout"]],features:[l._Bn([r.X1])],decls:29,vars:6,consts:[["color","primary","mode","ios"],["icon","arrow-back","text","","defaultHref","../tabs/ventas-dist",3,"click"],["padding",""],[3,"ngSubmit"],["forma","ngForm"],["type","text","name","nombrePais","readonly","true","required","",3,"ngModel","click","ngModelChange"],["name","distribuidor","readonly","",3,"ngModel","selectedText","ngModelChange"],["disabled","",3,"value",4,"ngFor","ngForOf"],["type","text","name","nombreMes","readonly","true","required","",1,"ion-text-right",3,"ngModel","click","ngModelChange"],["fixed",""],["type","number","name","Sellout",1,"ion-text-right",3,"ngModel","ngModelChange"],["type","submit","expand","block","color","primary"],["name","save"],["disabled","",3,"value"]],template:function(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons"),l.TgZ(3,"ion-back-button",1),l.NdJ("click",function(){return e.backButton()}),l.qZA(),l.qZA(),l.TgZ(4,"ion-title"),l._uU(5,"Agregar Sell-out"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"ion-content",2),l.TgZ(7,"form",3,4),l.NdJ("ngSubmit",function(){l.CHM(t);const i=l.MAs(8);return e.sendForm(i)}),l.TgZ(9,"ion-item"),l.TgZ(10,"ion-label"),l._uU(11,"Pa\xeds"),l.qZA(),l.TgZ(12,"ion-input",5),l.NdJ("click",function(){return e.userPaisModal()})("ngModelChange",function(t){return e.nombrePais=t}),l.qZA(),l.qZA(),l.TgZ(13,"ion-item"),l.TgZ(14,"ion-label"),l._uU(15,"Distribuidores"),l.qZA(),l.TgZ(16,"ion-select",6),l.NdJ("ngModelChange",function(t){return e.distribuidor=t}),l.YNc(17,m,2,2,"ion-select-option",7),l.qZA(),l.qZA(),l.TgZ(18,"ion-item"),l.TgZ(19,"ion-label"),l._uU(20,"Mes"),l.qZA(),l.TgZ(21,"ion-input",8),l.NdJ("click",function(){return e.mesModal()})("ngModelChange",function(t){return e.nombreMes=t}),l.qZA(),l.qZA(),l.TgZ(22,"ion-item"),l.TgZ(23,"ion-label",9),l._uU(24,"Sell-Out"),l.qZA(),l.TgZ(25,"ion-input",10),l.NdJ("ngModelChange",function(t){return e.Sellout=t}),l.qZA(),l.qZA(),l.TgZ(26,"ion-button",11),l._UZ(27,"ion-icon",12),l._uU(28,"Guardar"),l.qZA(),l.qZA(),l.qZA()}2&t&&(l.xp6(12),l.Q6J("ngModel",e.nombrePais),l.xp6(4),l.Q6J("ngModel",e.distribuidor)("selectedText",e.nombreDistribuidor),l.xp6(1),l.Q6J("ngForOf",e.distribuidores),l.xp6(4),l.Q6J("ngModel",e.nombreMes),l.xp6(4),l.Q6J("ngModel",e.Sellout))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.W2,o._Y,o.JL,o.F,r.Ie,r.Q$,r.pK,r.j9,o.Q7,o.JJ,o.On,r.t9,r.QI,s.sg,r.as,r.YG,r.gu,r.n0],styles:[""]}),t})()}];let g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[n.Bz.forChild(b)],n.Bz]}),t})(),p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[s.ez,o.u5,r.Pc,g]]}),t})()}}]);