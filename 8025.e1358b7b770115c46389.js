(self.webpackChunkMyInnovak=self.webpackChunkMyInnovak||[]).push([[8025],{8025:(i,t,e)=>{"use strict";e.r(t),e.d(t,{PresupuestoDistPageModule:()=>b});var s=e(1116),o=e(1041),n=e(4812),r=e(4258),a=e(4762),u=e(8975),l=e(5366),h=e(7047),d=e(4119),c=e(649);function S(i,t){if(1&i&&(l.TgZ(0,"ion-select-option",37),l._uU(1),l.qZA()),2&i){const i=t.$implicit;l.s9C("value",i.IdDistribuidor),l.xp6(1),l.Oqu(i.NombreDistribuidor)}}const p=function(i){return[i,"$","symbol","1.0","en"]},m=[{path:"",component:(()=>{class i{constructor(i,t,e,s,o,n){this.toastService=i,this.loadingCtrl=t,this.distribuidoresservice=e,this.alertCtrl=s,this.router=o,this.translate=n,this.monthsArray=u.k,this.monthsArrayView=u.k.map(i=>Object.assign({},i,{SI:`SI${i.id}`,SO:`SO${i.id}`})),this.yearArray=[2019,2020,2021,2022],this.idioma="es",n.setDefaultLang(this.idioma),this.translate.use(this.idioma);let r=(new Date).getFullYear();null==this.slAnio&&(this.slAnio=r)}ionViewDidEnter(){return(0,a.mG)(this,void 0,void 0,function*(){this.GET_Paises().then(i=>{this.GET_allDistribuitors()})})}backButton(){this.router.navigate(["/tabs/pi-finanzas"])}GET_Paises(){return(0,a.mG)(this,void 0,void 0,function*(){return new Promise((i,t)=>(0,a.mG)(this,void 0,void 0,function*(){var e=yield this.loadingCtrl.create({message:"Cargando..."});if(e.present(),"true"!=localStorage.getItem("appNetworkStatus"))return this.toastService.showToastBottom("Es necesario conectarse a internet"),void e.dismiss();this.paises=[];let s=JSON.parse(localStorage.getItem("userData")).userEmail.split("@");this.distribuidoresservice.GET_UserCountries(s[0]).subscribe(t=>(0,a.mG)(this,void 0,void 0,function*(){return this.paises=t,this.pais=t[0].IdPais+" - "+t[0].Compania,this.nombrePais=t[0].NombrePais+" - "+t[0].Compania,console.log(t),e.dismiss(),i(t)}),i=>(this.paises=[],this.toastService.showToastBottom("No se encontr\xf3 informaci\xf3n"),console.log("Error: "+i),e.dismiss(),t(i)))}))})}anioModal(){return(0,a.mG)(this,void 0,void 0,function*(){const i=[];let t=(new Date).getFullYear();for(let e of this.yearArray)i.push(e!=t?{type:"radio",label:e,value:e,checked:!1}:{type:"radio",label:e,value:e,checked:!0});(yield this.alertCtrl.create({header:"A\xf1o",inputs:i,buttons:[{text:this.translate.instant("PAGES.NUEVOGASTO.CANCELAR"),role:"cancel"},{text:"Ok",handler:i=>{this.slAnio=i,this.changeDistribuidor(this.slDistribuidor)}}]})).present()})}userPaisModal(){return(0,a.mG)(this,void 0,void 0,function*(){const i=[];for(let t of this.paises)i.push(0==t.IdPais?{type:"radio",label:t.NombrePais+" - "+t.Compania,value:t.IdPais+" - "+t.Compania,checked:!0}:{type:"radio",label:t.NombrePais+" - "+t.Compania,value:t.IdPais+" - "+t.Compania,checked:!1});(yield this.alertCtrl.create({header:"Pa\xeds",inputs:i,buttons:[{text:this.translate.instant("PAGES.NUEVOGASTO.CANCELAR"),role:"cancel"},{text:"Ok",handler:i=>{this.pais=i;for(let t of this.paises)t.IdPais+" - "+t.Compania==this.pais&&(this.nombrePais=t.NombrePais+" - "+t.Compania,this.GET_allDistribuitors())}}]})).present()})}GET_allDistribuitors(){return(0,a.mG)(this,void 0,void 0,function*(){var i=yield this.loadingCtrl.create({message:"Cargando..."});if(i.present(),"true"!=localStorage.getItem("appNetworkStatus"))return this.toastService.showToastBottom("Es necesario conectarse a internet"),void i.dismiss();this.distribuidores=[],this.distribuidoresservice.GET_allDistribuitors(this.pais,"%").subscribe(i=>{console.log(i),this.distribuidores=i},i=>{this.distribuidores=[],this.toastService.showToastBottom("No se encontr\xf3 informaci\xf3n")}),i.dismiss()})}sendForm(i){return(0,a.mG)(this,void 0,void 0,function*(){var t=yield this.loadingCtrl.create({message:"Guardando presupuesto..."});t.present(),this.distribuidoresservice.POST_newBudget(i.value).subscribe(i=>(0,a.mG)(this,void 0,void 0,function*(){200==i.status?(t.dismiss(),(yield this.alertCtrl.create({header:this.translate.instant("Guardado"),subHeader:this.translate.instant("Se ha guardado el presupuesto del distribuidor"),buttons:[{text:"Ok",handler:()=>{}}]})).present()):(t.dismiss(),this.toastService.showToastBottom(i[0].statusDescription))}))})}changeDistribuidor(i){return(0,a.mG)(this,void 0,void 0,function*(){this.slDistribuidor=i.detail.value;var t=yield this.loadingCtrl.create({message:"Cargando..."});if(t.present(),"true"!=localStorage.getItem("appNetworkStatus"))return this.toastService.showToastBottom("Es necesario conectarse a internet"),void t.dismiss();this.infoDistribuidor=[],this.distribuidoresservice.GET_budgetDistribuitor(this.slDistribuidor,this.slAnio,this.pais).subscribe(i=>{if(this.infoDistribuidor=i,this.invInicial=this.infoDistribuidor[0].InvInicial,this.infoDistribuidor.length>1)for(let t=0;t<this.infoDistribuidor.length;t++)"SI"==this.infoDistribuidor[t].Tipo?(this.SI1=this.infoDistribuidor[t].Ene,this.SI2=this.infoDistribuidor[t].Feb,this.SI3=this.infoDistribuidor[t].Mar,this.SI4=this.infoDistribuidor[t].Abr,this.SI5=this.infoDistribuidor[t].May,this.SI6=this.infoDistribuidor[t].Jun,this.SI7=this.infoDistribuidor[t].Jul,this.SI8=this.infoDistribuidor[t].Ago,this.SI9=this.infoDistribuidor[t].Sep,this.SI10=this.infoDistribuidor[t].Oct,this.SI11=this.infoDistribuidor[t].Nov,this.SI12=this.infoDistribuidor[t].Dic,this.TotalSI=this.SI1+this.SI2+this.SI3+this.SI4+this.SI5+this.SI6+this.SI7+this.SI8+this.SI9+this.SI10+this.SI11+this.SI12):(this.SO1=this.infoDistribuidor[t].Ene,this.SO2=this.infoDistribuidor[t].Feb,this.SO3=this.infoDistribuidor[t].Mar,this.SO4=this.infoDistribuidor[t].Abr,this.SO5=this.infoDistribuidor[t].May,this.SO6=this.infoDistribuidor[t].Jun,this.SO7=this.infoDistribuidor[t].Jul,this.SO8=this.infoDistribuidor[t].Ago,this.SO9=this.infoDistribuidor[t].Sep,this.SO10=this.infoDistribuidor[t].Oct,this.SO11=this.infoDistribuidor[t].Nov,this.SO12=this.infoDistribuidor[t].Dic,this.TotalSO=this.SO1+this.SO2+this.SO3+this.SO4+this.SO5+this.SO6+this.SO7+this.SO8+this.SO9+this.SO10+this.SO11+this.SO12)},i=>{this.infoDistribuidor=[],this.toastService.showToastBottom("No se encontr\xf3 informaci\xf3n"),this.invInicial=0,this.SI1=0,this.SI2=0,this.SI3=0,this.SI4=0,this.SI5=0,this.SI6=0,this.SI7=0,this.SI8=0,this.SI9=0,this.SI10=0,this.SI11=0,this.SI12=0,this.SO1=0,this.SO2=0,this.SO3=0,this.SO4=0,this.SO5=0,this.SO6=0,this.SO7=0,this.SO8=0,this.SO9=0,this.SO10=0,this.SO11=0,this.SO12=0,this.TotalSI=0,this.TotalSO=0}),t.dismiss()})}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(h.k),l.Y36(n.HT),l.Y36(d.L),l.Y36(n.Br),l.Y36(r.F0),l.Y36(c.sK))},i.\u0275cmp=l.Xpm({type:i,selectors:[["app-presupuesto-dist"]],decls:128,vars:247,consts:[["color","primary","mode","ios"],["icon","arrow-back","text","","defaultHref","../tabs/pi-finanzas",3,"click"],[3,"ngSubmit"],["forma","ngForm"],["size","12"],["position","fixed"],["type","text","name","nombrePais","readonly","true","required","",3,"ngModel","click","ngModelChange"],["name","distribuidores",3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","name","anio","readonly","true","required","",3,"ngModel","click","ngModelChange"],["name","invInicial","readonly","",3,"value"],["name","SI1","readonly","",3,"value"],["name","SO1","readonly","",3,"value"],["name","SI2","readonly","",3,"value"],["name","SO2","readonly","",3,"value"],["name","SI3","readonly","",3,"value"],["name","SO3","readonly","",3,"value"],["name","SI4","readonly","",3,"value"],["name","SO4","readonly","",3,"value"],["name","SI5","readonly","",3,"value"],["name","SO5","readonly","",3,"value"],["name","SI6","readonly","",3,"value"],["name","SO6","readonly","",3,"value"],["name","SI7","readonly","",3,"value"],["name","SO7","readonly","",3,"value"],["name","SI8","readonly","",3,"value"],["name","SO8","readonly","",3,"value"],["name","SI9","readonly","",3,"value"],["name","SO9","readonly","",3,"value"],["name","SI10","readonly","",3,"value"],["name","SO10","readonly","",3,"value"],["name","SI11","readonly","",3,"value"],["name","SO11","readonly","",3,"value"],["name","SI12","readonly","",3,"value"],["name","SO12","readonly","",3,"value"],["name","TotalSI","readonly","",3,"value"],["name","TotalSO","readonly","",3,"value"],[3,"value"]],template:function(i,t){if(1&i){const i=l.EpF();l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons"),l.TgZ(3,"ion-back-button",1),l.NdJ("click",function(){return t.backButton()}),l.qZA(),l.qZA(),l.TgZ(4,"ion-title"),l._uU(5,"Presupuesto"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"ion-content"),l.TgZ(7,"form",2,3),l.NdJ("ngSubmit",function(){l.CHM(i);const e=l.MAs(8);return t.sendForm(e)}),l.TgZ(9,"ion-row"),l.TgZ(10,"ion-col",4),l.TgZ(11,"ion-item"),l.TgZ(12,"ion-label",5),l._uU(13,"Pa\xeds"),l.qZA(),l.TgZ(14,"ion-input",6),l.NdJ("click",function(){return t.userPaisModal()})("ngModelChange",function(i){return t.nombrePais=i}),l.qZA(),l.qZA(),l.TgZ(15,"ion-item"),l.TgZ(16,"ion-label",5),l._uU(17,"Distribuidores"),l.qZA(),l.TgZ(18,"ion-select",7),l.NdJ("ngModelChange",function(i){return t.slDistribuidor=i})("ionChange",function(i){return t.changeDistribuidor(i)}),l.YNc(19,S,2,2,"ion-select-option",8),l.qZA(),l.qZA(),l.TgZ(20,"ion-item",5),l.TgZ(21,"ion-label"),l._uU(22,"A\xf1o"),l.qZA(),l.TgZ(23,"ion-input",9),l.NdJ("click",function(){return t.anioModal()})("ngModelChange",function(i){return t.slAnio=i}),l.qZA(),l.qZA(),l.TgZ(24,"ion-item"),l.TgZ(25,"ion-label",5),l._uU(26,"Inv. Inicial"),l.qZA(),l._UZ(27,"ion-input",10),l.ALo(28,"currency"),l.qZA(),l.TgZ(29,"ion-grid"),l.TgZ(30,"ion-row"),l._UZ(31,"ion-col"),l.TgZ(32,"ion-col"),l._uU(33," Sell-in "),l.qZA(),l.TgZ(34,"ion-col"),l._uU(35," Sell-out "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(36,"ion-item"),l.TgZ(37,"ion-label",5),l._uU(38,"Enero"),l.qZA(),l._UZ(39,"ion-input",11),l.ALo(40,"currency"),l._UZ(41,"ion-input",12),l.ALo(42,"currency"),l.qZA(),l.TgZ(43,"ion-item"),l.TgZ(44,"ion-label",5),l._uU(45,"Febrero"),l.qZA(),l._UZ(46,"ion-input",13),l.ALo(47,"currency"),l._UZ(48,"ion-input",14),l.ALo(49,"currency"),l.qZA(),l.TgZ(50,"ion-item"),l.TgZ(51,"ion-label",5),l._uU(52,"Marzo"),l.qZA(),l._UZ(53,"ion-input",15),l.ALo(54,"currency"),l._UZ(55,"ion-input",16),l.ALo(56,"currency"),l.qZA(),l.TgZ(57,"ion-item"),l.TgZ(58,"ion-label",5),l._uU(59,"Abril"),l.qZA(),l._UZ(60,"ion-input",17),l.ALo(61,"currency"),l._UZ(62,"ion-input",18),l.ALo(63,"currency"),l.qZA(),l.TgZ(64,"ion-item"),l.TgZ(65,"ion-label",5),l._uU(66,"Mayo"),l.qZA(),l._UZ(67,"ion-input",19),l.ALo(68,"currency"),l._UZ(69,"ion-input",20),l.ALo(70,"currency"),l.qZA(),l.TgZ(71,"ion-item"),l.TgZ(72,"ion-label",5),l._uU(73,"Junio"),l.qZA(),l._UZ(74,"ion-input",21),l.ALo(75,"currency"),l._UZ(76,"ion-input",22),l.ALo(77,"currency"),l.qZA(),l.TgZ(78,"ion-item"),l.TgZ(79,"ion-label",5),l._uU(80,"Julio"),l.qZA(),l._UZ(81,"ion-input",23),l.ALo(82,"currency"),l._UZ(83,"ion-input",24),l.ALo(84,"currency"),l.qZA(),l.TgZ(85,"ion-item"),l.TgZ(86,"ion-label",5),l._uU(87,"Agosto"),l.qZA(),l._UZ(88,"ion-input",25),l.ALo(89,"currency"),l._UZ(90,"ion-input",26),l.ALo(91,"currency"),l.qZA(),l.TgZ(92,"ion-item"),l.TgZ(93,"ion-label",5),l._uU(94,"Septiembre"),l.qZA(),l._UZ(95,"ion-input",27),l.ALo(96,"currency"),l._UZ(97,"ion-input",28),l.ALo(98,"currency"),l.qZA(),l.TgZ(99,"ion-item"),l.TgZ(100,"ion-label",5),l._uU(101,"Octubre"),l.qZA(),l._UZ(102,"ion-input",29),l.ALo(103,"currency"),l._UZ(104,"ion-input",30),l.ALo(105,"currency"),l.qZA(),l.TgZ(106,"ion-item"),l.TgZ(107,"ion-label",5),l._uU(108,"Noviembre"),l.qZA(),l._UZ(109,"ion-input",31),l.ALo(110,"currency"),l._UZ(111,"ion-input",32),l.ALo(112,"currency"),l.qZA(),l.TgZ(113,"ion-item"),l.TgZ(114,"ion-label",5),l._uU(115,"Diciembre"),l.qZA(),l._UZ(116,"ion-input",33),l.ALo(117,"currency"),l._UZ(118,"ion-input",34),l.ALo(119,"currency"),l.qZA(),l.TgZ(120,"ion-item"),l.TgZ(121,"ion-label",5),l._uU(122,"Total ($)"),l.qZA(),l._UZ(123,"ion-input",35),l.ALo(124,"currency"),l._UZ(125,"ion-input",36),l.ALo(126,"currency"),l.qZA(),l._UZ(127,"br"),l.qZA(),l.qZA(),l.qZA(),l.qZA()}2&i&&(l.xp6(14),l.Q6J("ngModel",t.nombrePais),l.xp6(4),l.Q6J("ngModel",t.slDistribuidor),l.xp6(1),l.Q6J("ngForOf",t.distribuidores),l.xp6(4),l.Q6J("ngModel",t.slAnio),l.xp6(4),l.s9C("value",l.G7q(28,31,l.VKq(193,p,t.invInicial))),l.xp6(12),l.s9C("value",l.G7q(40,37,l.VKq(195,p,t.SI1))),l.xp6(2),l.s9C("value",l.G7q(42,43,l.VKq(197,p,t.SO1))),l.xp6(5),l.s9C("value",l.G7q(47,49,l.VKq(199,p,t.SI2))),l.xp6(2),l.s9C("value",l.G7q(49,55,l.VKq(201,p,t.SO2))),l.xp6(5),l.s9C("value",l.G7q(54,61,l.VKq(203,p,t.SI3))),l.xp6(2),l.s9C("value",l.G7q(56,67,l.VKq(205,p,t.SO3))),l.xp6(5),l.s9C("value",l.G7q(61,73,l.VKq(207,p,t.SI4))),l.xp6(2),l.s9C("value",l.G7q(63,79,l.VKq(209,p,t.SO4))),l.xp6(5),l.s9C("value",l.G7q(68,85,l.VKq(211,p,t.SI5))),l.xp6(2),l.s9C("value",l.G7q(70,91,l.VKq(213,p,t.SO5))),l.xp6(5),l.s9C("value",l.G7q(75,97,l.VKq(215,p,t.SI6))),l.xp6(2),l.s9C("value",l.G7q(77,103,l.VKq(217,p,t.SO6))),l.xp6(5),l.s9C("value",l.G7q(82,109,l.VKq(219,p,t.SI7))),l.xp6(2),l.s9C("value",l.G7q(84,115,l.VKq(221,p,t.SO7))),l.xp6(5),l.s9C("value",l.G7q(89,121,l.VKq(223,p,t.SI8))),l.xp6(2),l.s9C("value",l.G7q(91,127,l.VKq(225,p,t.SO8))),l.xp6(5),l.s9C("value",l.G7q(96,133,l.VKq(227,p,t.SI9))),l.xp6(2),l.s9C("value",l.G7q(98,139,l.VKq(229,p,t.SO9))),l.xp6(5),l.s9C("value",l.G7q(103,145,l.VKq(231,p,t.SI10))),l.xp6(2),l.s9C("value",l.G7q(105,151,l.VKq(233,p,t.SO10))),l.xp6(5),l.s9C("value",l.G7q(110,157,l.VKq(235,p,t.SI11))),l.xp6(2),l.s9C("value",l.G7q(112,163,l.VKq(237,p,t.SO11))),l.xp6(5),l.s9C("value",l.G7q(117,169,l.VKq(239,p,t.SI12))),l.xp6(2),l.s9C("value",l.G7q(119,175,l.VKq(241,p,t.SO12))),l.xp6(5),l.s9C("value",l.G7q(124,181,l.VKq(243,p,t.TotalSI))),l.xp6(2),l.s9C("value",l.G7q(126,187,l.VKq(245,p,t.TotalSO))))},directives:[n.Gu,n.sr,n.Sm,n.oU,n.cs,n.wd,n.W2,o._Y,o.JL,o.F,n.Nd,n.wI,n.Ie,n.Q$,n.pK,n.j9,o.Q7,o.JJ,o.On,n.t9,n.QI,s.sg,n.jY,n.n0],pipes:[s.H9],styles:[""]}),i})()}];let Z=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[[r.Bz.forChild(m)],r.Bz]}),i})(),b=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[[s.ez,o.u5,n.Pc,Z]]}),i})()}}]);