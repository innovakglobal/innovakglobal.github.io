(self.webpackChunkMyInnovak=self.webpackChunkMyInnovak||[]).push([[1519],{1519:(e,t,i)=>{"use strict";i.r(t),i.d(t,{HttpLoaderFactory:()=>w,NewLabRequestPageModule:()=>S});var n=i(1116),o=i(1041),a=i(4812),r=i(4258),l=i(4762),s=i(6948),u=i(5049),c=i(5691),d=i(5366),p=i(3762),g=i(4033),m=i(7047),h=i(649),Z=i(6532),f=i(6116);function y(e,t){if(1&e&&(d.TgZ(0,"ion-select-option",34),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e),d.xp6(1),d.Oqu(e)}}function A(e,t){if(1&e&&(d.TgZ(0,"ion-col",5),d.TgZ(1,"ion-label",35),d._uU(2,"Adjunto:"),d.qZA(),d.TgZ(3,"ion-item",36),d._UZ(4,"ion-icon",37),d._uU(5),d.qZA(),d.qZA()),2&e){const e=d.oxw();d.xp6(5),d.hij(" ",e.newFileName," ")}}function v(e,t){if(1&e&&d._UZ(0,"img",38),2&e){const e=d.oxw();d.Q6J("src",e.photo64PreviewData,d.LSH)}}function b(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"ion-fab-button",39),d.NdJ("click",function(){return d.CHM(e),d.oxw().takePhoto()}),d._UZ(1,"ion-icon",40),d.qZA()}}const T=[{path:"",component:(()=>{class e{constructor(e,t,i,n,o,a,r,l,d,p,g){this.datePipe=e,this.laboratoryService=t,this.cameraService=i,this.toastService=n,this.alertCtrl=o,this.loadingCtrl=a,this.translate=r,this.datePicker=l,this.iab=d,this.router=p,this.plt=g,this.userData="",this.newFile="",this.newFileName="",this.photo64Preview="",this.photo64PreviewData="",this.fileSource="no file",this.idioma="es",this.typeOfIrrigation=[],this.typeOfSample=[],this.typeOfAnalysis=[],this.sampleDate="05-12-2018",this.analisisArray=s.i,this.irrigationsArray=u.U,this.samplesArray=c.u,this.sistemaOperativo="",this.numMuestras=[],this.validateDate=/^(0?[1-9]|[12][0-9]|3[01])[\-](0[1-9]|1[012])[\-]\d{4}$/,r.setDefaultLang(this.idioma),this.translate.use(this.idioma);for(let s=1;s<=50;s++)this.numMuestras.push(s)}ionViewDidEnter(){localStorage.getItem("userData")?(this.userData=JSON.parse(localStorage.getItem("userData")),this.sistemaOperativo=this.plt.is("android")?"android":"ios",this.sampleDate=(new Date).toISOString()):this.router.navigate(["/login"])}backButton(){this.router.navigate(["/tabs/gastos"])}transformDate(){var e=this.sampleDate;return e.length>10&&(e=e.substr(0,10)),new Array,e.split("/"),this.datePipe.transform(e,"dd-MM-yyyy")}validateDateFunction(e){return!(!this.validateDate.test(e)||""==e)}sendForm(e){return(0,l.mG)(this,void 0,void 0,function*(){if("true"==localStorage.getItem("appNetworkStatus"))if(this.validateDateFunction(this.transformDate()))if("no file"!=this.fileSource){var t=yield this.loadingCtrl.create({message:"Enviando solicitud..."});t.present(),this.laboratoryService.POST_newLabRequest(e.value,this.userData.userID,document.getElementById("file-2").files[0],this.photo64Preview).subscribe(e=>(0,l.mG)(this,void 0,void 0,function*(){if("200"==e[0].statusID){t.dismiss();let e=yield this.alertCtrl.create({header:"Solicitud registrada",subHeader:"Solicitud enviada con exito",buttons:[{text:"Ok",handler:()=>{this.router.navigate(["/tabs/laboratorio"])}}]});yield e.present()}else t.dismiss(),this.toastService.showToastBottom(e[0].statusDescription)}))}else this.toastService.showToastBottom("Es necesario adjuntar una imagen");else this.toastService.showToastBottom("Formato de fecha invalido (dd-MM-yyyy)");else this.toastService.showToastBottom("Es necesario conectarse a internet")})}takePhoto(){this.newFile="",this.newFileName="",this.photo64Preview="",this.photo64PreviewData="",this.fileSource="no file",this.cameraService.takePhotoService().then(e=>{this.photo64Preview=e,this.photo64PreviewData="data:image/jpeg;base64,"+e,this.fileSource="Camera"})}getFileName(){this.newFileName="",this.newFileName=document.getElementById("file-2").files[0].name,this.fileSource=this.newFileName.length<4?"no file":"internalStorage"}pickFileFromDevice(){this.newFile="",this.newFileName="",this.photo64Preview="",this.photo64PreviewData="",this.fileSource="no file",document.getElementById("file-2").click(),this.newFile=document.getElementById("file-2").files[0]}typeOfSamplesModal(){return(0,l.mG)(this,void 0,void 0,function*(){const e=[];let t=this.typeOfSample;for(let i of this.samplesArray)t.includes(i.value)?e.push({type:"radio",label:i.label,value:i.value,checked:!0}):e.push({type:"radio",label:i.label,value:i.value,checked:!1});(yield this.alertCtrl.create({header:"Tipo de muestra",inputs:e,buttons:[{text:this.translate.instant("PAGES.NUEVOGASTO.CANCELAR"),role:"cancel"},{text:"Ok",handler:e=>{this.typeOfSample=e}}]})).present()})}typeOfirrigationsModal(){return(0,l.mG)(this,void 0,void 0,function*(){const e=[];let t=this.typeOfIrrigation;for(let i of this.irrigationsArray)t.includes(i.value)?e.push({type:"radio",label:i.label,value:i.value,checked:!0}):e.push({type:"radio",label:i.label,value:i.value,checked:!1});(yield this.alertCtrl.create({header:"Tipo de riego",inputs:e,buttons:[{text:this.translate.instant("PAGES.NUEVOGASTO.CANCELAR"),role:"cancel"},{text:"Ok",handler:e=>{this.typeOfIrrigation=e}}]})).present()})}typeOfAnalysisModal(){return(0,l.mG)(this,void 0,void 0,function*(){const e=[];let t=this.typeOfAnalysis;for(let i of this.analisisArray)t.includes(i.value)?e.push({type:"radio",label:i.label,value:i.value,checked:!0}):e.push({type:"radio",label:i.label,value:i.value,checked:!1});(yield this.alertCtrl.create({header:"Tipo de analisis",inputs:e,buttons:[{text:this.translate.instant("PAGES.NUEVOGASTO.CANCELAR"),role:"cancel"},{text:"Ok",handler:e=>{this.typeOfAnalysis=e}}]})).present()})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(n.uU),d.Y36(p.v),d.Y36(g.y),d.Y36(m.k),d.Y36(a.Br),d.Y36(a.HT),d.Y36(h.sK),d.Y36(Z.M),d.Y36(f.i),d.Y36(r.F0),d.Y36(a.t4))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-new-lab-request"]],decls:83,vars:22,consts:[["color","primary","mode","ios"],["icon","arrow-back","text","","defaultHref","../laboratorio",3,"click"],["padding",""],[3,"ngSubmit"],["forma","ngForm"],["size","12"],["position","stacked"],["type","text","name","agricultura","required","",3,"ngModel"],["type","text","name","agriculturaOwner","required","",3,"ngModel"],["value","1","name","sampleNumber","cancelText","CANCELAR","okText","OK","required","",3,"ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","text","name","lot","required","",3,"ngModel"],["displayFormat","DD/MM/YYYY","name","sampleDate","required","",3,"ngModel","ngModelChange","ionChange"],["type","text","name","culture","required","",3,"ngModel"],["type","text","name","typeOfSample","readonly","true","required","",3,"ngModel","click"],["type","text","name","typeOfAnalysis","readonly","true","required","",3,"ngModel","click"],["type","text","name","symptom",3,"ngModel"],["type","text","name","usedProducts",3,"ngModel"],["type","text","name","stage",3,"ngModel"],["type","text","name","typeOfIrrigation","readonly","true",3,"ngModel","click"],["rows","5","maxLength","100","name","information","required","",3,"ngModel"],["size","12",4,"ngIf"],[1,"display-none"],["type","text","name","fileSource","readonly","true","text-center","",3,"ngModel","ngModelChange"],[3,"src",4,"ngIf"],["type","file","name","file-2[]","id","file-2",3,"change"],["type","submit","expand","block","color","primary",3,"disabled"],["vertical","bottom","horizontal","end","no-padding","","slot","fixed"],["color","primary","size","small","color","primary"],["name","folder","size","small"],["side","top"],["color","primary","size","small",3,"click"],["name","newspaper"],["color","primary",3,"click",4,"ngIf"],[3,"value"],[1,"p-title"],[1,"file-list"],["name","attach ","color","primary ","item-start",""],[3,"src"],["color","primary",3,"click"],["name","camera"]],template:function(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"ion-header"),d.TgZ(1,"ion-toolbar",0),d.TgZ(2,"ion-buttons"),d.TgZ(3,"ion-back-button",1),d.NdJ("click",function(){return t.backButton()}),d.qZA(),d.qZA(),d.TgZ(4,"ion-title"),d._uU(5,"Nueva solicitud"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(6,"ion-content",2),d.TgZ(7,"form",3,4),d.NdJ("ngSubmit",function(){d.CHM(e);const i=d.MAs(8);return t.sendForm(i)}),d.TgZ(9,"ion-row"),d.TgZ(10,"ion-col",5),d.TgZ(11,"ion-item"),d.TgZ(12,"ion-label",6),d._uU(13,"Agricola*"),d.qZA(),d._UZ(14,"ion-input",7),d.qZA(),d.TgZ(15,"ion-item"),d.TgZ(16,"ion-label",6),d._uU(17,"Propietario*"),d.qZA(),d._UZ(18,"ion-input",8),d.qZA(),d.TgZ(19,"ion-item"),d.TgZ(20,"ion-label",6),d._uU(21,"N\xfamero de muestras*"),d.qZA(),d.TgZ(22,"ion-select",9),d.YNc(23,y,2,2,"ion-select-option",10),d.qZA(),d.qZA(),d.TgZ(24,"ion-item"),d.TgZ(25,"ion-label",6),d._uU(26,"Lote, cuadro, parcela etc*"),d.qZA(),d._UZ(27,"ion-input",11),d.qZA(),d.TgZ(28,"ion-item"),d.TgZ(29,"ion-label",6),d._uU(30,"Fecha de muestra*"),d.qZA(),d.TgZ(31,"ion-datetime",12),d.NdJ("ngModelChange",function(e){return t.sampleDate=e})("ionChange",function(){return t.transformDate()}),d.qZA(),d.qZA(),d.TgZ(32,"ion-item"),d.TgZ(33,"ion-label",6),d._uU(34,"Cultivo*"),d.qZA(),d._UZ(35,"ion-input",13),d.qZA(),d.TgZ(36,"ion-item"),d.TgZ(37,"ion-label",6),d._uU(38,"Tipo de muestra*"),d.qZA(),d.TgZ(39,"ion-input",14),d.NdJ("click",function(){return t.typeOfSamplesModal()}),d.qZA(),d.qZA(),d.TgZ(40,"ion-item"),d.TgZ(41,"ion-label",6),d._uU(42,"Analisis solicitado*"),d.qZA(),d.TgZ(43,"ion-input",15),d.NdJ("click",function(){return t.typeOfAnalysisModal()}),d.qZA(),d.qZA(),d.TgZ(44,"ion-item"),d.TgZ(45,"ion-label",6),d._uU(46,"Sintomas de la planta"),d.qZA(),d._UZ(47,"ion-input",16),d.qZA(),d.TgZ(48,"ion-item"),d.TgZ(49,"ion-label",6),d._uU(50,"Productos innovak utilizados"),d.qZA(),d._UZ(51,"ion-input",17),d.qZA(),d.TgZ(52,"ion-item"),d.TgZ(53,"ion-label",6),d._uU(54,"Etapa fenol\xf3gica"),d.qZA(),d._UZ(55,"ion-input",18),d.qZA(),d.TgZ(56,"ion-item"),d.TgZ(57,"ion-label",6),d._uU(58,"Tipo de riego"),d.qZA(),d.TgZ(59,"ion-input",19),d.NdJ("click",function(){return t.typeOfirrigationsModal()}),d.qZA(),d.qZA(),d.TgZ(60,"ion-item"),d.TgZ(61,"ion-label",6),d._uU(62,"Informaci\xf3n adicional*"),d.qZA(),d._UZ(63,"ion-textarea",20),d.qZA(),d.YNc(64,A,6,1,"ion-col",21),d.TgZ(65,"ion-item",22),d.TgZ(66,"ion-label",6),d._uU(67,"fileSource"),d.qZA(),d.TgZ(68,"ion-input",23),d.NdJ("ngModelChange",function(e){return t.fileSource=e}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(69,"ion-item"),d.YNc(70,v,1,1,"img",24),d.qZA(),d.TgZ(71,"ion-item",22),d.TgZ(72,"input",25),d.NdJ("change",function(){return t.getFileName()}),d.qZA(),d.qZA(),d.TgZ(73,"ion-button",26),d._uU(74),d.ALo(75,"translate"),d.qZA(),d.qZA(),d.TgZ(76,"ion-fab",27),d.TgZ(77,"ion-fab-button",28),d._UZ(78,"ion-icon",29),d.qZA(),d.TgZ(79,"ion-fab-list",30),d.TgZ(80,"ion-fab-button",31),d.NdJ("click",function(){return t.pickFileFromDevice()}),d._UZ(81,"ion-icon",32),d.qZA(),d.YNc(82,b,2,0,"ion-fab-button",33),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.MAs(8);d.xp6(14),d.Q6J("ngModel",t.agricultura),d.xp6(4),d.Q6J("ngModel",t.agriculturaOwner),d.xp6(4),d.Q6J("ngModel",t.sampleNumber),d.xp6(1),d.Q6J("ngForOf",t.numMuestras),d.xp6(4),d.Q6J("ngModel",t.lot),d.xp6(4),d.Q6J("ngModel",t.sampleDate),d.xp6(4),d.Q6J("ngModel",t.culture),d.xp6(4),d.Q6J("ngModel",t.typeOfSample),d.xp6(4),d.Q6J("ngModel",t.typeOfAnalysis),d.xp6(4),d.Q6J("ngModel",t.symptom),d.xp6(4),d.Q6J("ngModel",t.usedProducts),d.xp6(4),d.Q6J("ngModel",t.stage),d.xp6(4),d.Q6J("ngModel",t.typeOfIrrigation),d.xp6(4),d.Q6J("ngModel",t.information),d.xp6(1),d.Q6J("ngIf",t.newFileName.length>4),d.xp6(4),d.Q6J("ngModel",t.fileSource),d.xp6(2),d.Q6J("ngIf",t.photo64PreviewData.length>115),d.xp6(3),d.Q6J("disabled",!e.valid),d.xp6(1),d.hij("",d.lcZ(75,20,"PAGES.NUEVOGASTO.ENVIAR")," "),d.xp6(8),d.Q6J("ngIf","android"===t.sistemaOperativo)}},directives:[a.Gu,a.sr,a.Sm,a.oU,a.cs,a.wd,a.W2,o._Y,o.JL,o.F,a.Nd,a.wI,a.Ie,a.Q$,a.pK,a.j9,o.Q7,o.JJ,o.On,a.t9,a.QI,n.sg,a.x4,a.g2,n.O5,a.YG,a.IJ,a.W4,a.gu,a.zq,a.n0],pipes:[h.X$],styles:["ion-content[_ngcontent-%COMP%]{--padding-end:10px;--padding-top:10px}"]}),e})()}];let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[r.Bz.forChild(T)],r.Bz]}),e})();var M=i(9037),x=i(2693);function w(e){return new M.w(e,"assets/i18n/",".json")}let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[n.ez,o.u5,a.Pc,q,h.aw.forRoot({loader:{provide:h.Zw,useFactory:w,deps:[x.eN]}})]]}),e})()}}]);